<template name="chatComponent">
    <div class="chatComponent">
        <ul class="messages">
            {{#if initialMessage}}
                <li class="initialMessage message {{#if isStudent}}self{{/if}}">
                    <div class="text">{{initialMessage}}</div>
                    <div class="metadata">{{subject}}, {{grade}}</div>
                </li>
            {{/if}}
            {{#each messages}}
                {{> chatMessage}}
            {{/each}}
        </ul>
        {{#if hasEnded}}
            <div class="sessionEnded">
                <p>Leksehjelpen er avsluttet.</p>
                <p>Takk for at du brukte digital leksehjelp</p>
            </div>
        {{else}}
            {{> messageForm}}
        {{/if}}
    </div>
</template>

<template name="messageForm">
    <form class="messageForm">
        <input
            type="file"
            name="attachment"
            accept="image/*|.pdf|.doc|.docx"
            class="file"
            style="display: none;">
        <button type="button" class="upload">
            <span class="plus">+</span>
        </button>
        <textarea
            class="chatField"
            placeholder="Skriv her..."
            rows="1"
            autofocus>{{value}}</textarea>
        <button type="submit" class="submit" disabled="{{#unless value}}true{{/unless}}">
            <svg width="30px" height="30px" viewBox="0 0 30 30">
                <polygon
                    class="arrow {{#if value}}active{{/if}}"
                    points="30 15 0 30 5.5 15 0 0"></polygon>
            </svg>
        </button>
    </form>
</template>
