<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Røde Kors - Digital leksehjelp</title>
</head>

<body>
    {{> header }}
    {{> currentPage}}
</body>

<template name="currentPage">
    {{ yield }}
</template>

<template name="tutor">
    {{> studentSessions }}
</template>

<template name="header">
    <h1>{{ greeting }}</h1>
    {{#if currentUser }}
        <h3>I am logged in as {{ currentUserEmail }}! \o/</h3>
        {{#if isAdmin }}
            <a href="/admin">Administrer brukere</a>
            <a href="/tutor">Hjelp elever</a>
            <a href="/">Få hjelp</a>
        {{/if}}
    {{/if}}
    <div align="right">{{loginButtons align="right"}}</div>
</template>

<template name="getHelp">
    <p>Antall personer i kø: {{ queueSize }}</p>

    <form role="form">
      <div class="form-group">
        <label for="subject">Fag:</label>
        {{> subjectSelector }}
      </div>
      <div class="form-group">
        <label for="grade">Trinn:</label>
        <input id="grade" type="text" size="20" />
      </div>
      <div class="form-group">
        <label for="topic">Emne:</label>
        <input id="topic" type="text" size="20" />
      </div>
      <div class="spacer"><a id="createSession" class="button" href="#">F&aring; hjelp</a></div>
    </form>

    {{#with studentSession }}
        <p>
            {{{ state }}}
            {{#if stateWaiting }}
                Det er {{ studentsInFront }} foran deg i køen.
            {{/if}}
            {{#if stateReady }}
                <p>
                    <a id="getHelp" href="{{ videoConferenceUrl}} ">Klikk her for å starte leksehjelp</a>
                </p>
            {{/if}}
        </p>
    {{/with}}
</template>

<template name="subjectSelector">
    <select id="subject">
        {{# each subjects }}
            <option>{{this}}</option>
        {{/each}}
    </select>
</template>

<template name="studentSessions">
    {{#if currentUser }}
        <h1>Du er nå logget inn som lærer</h1>
        <h1>Elever som venter i kø</h1>

        {{> studentSessionsTable}}
    {{/if}}
</template>

<template name="userAdmin">
    <h1>User administration</h1>
    {{#each Meteor.users}}
        username
    {{/each}}
</template>

<template name="studentSessionsTable">
    <h2>Mine fag</h2>
        <table border="1">
            <tr>
                <th>Kø id</th>
                <th>Fag</th>
                <th>Trinn</th>
                <th>Emne</th>
                <th></th>
                <th>Status</th>
                <th>Slett</th>
            </tr>
            {{#each studentSessions }}
                {{> studentSessionItem }}
            {{/each}}
        </table>

    <h2>Andre fag</h2>
        <table border="1">
            <tr>
                <th>Kø id</th>
                <th>Fag</th>
                <th>Trinn</th>
                <th>Emne</th>
                <th></th>
                <th>Status</th>
                <th>Slett</th>
            </tr>
            {{#each studentSessions }}
                {{> studentSessionItem }}
            {{/each}}
        </table>
</template>

<template name="studentSessionItem">
    <tr>
        <td>{{ queueNr }}</td>
        <td>{{ subject }}</td>
        <td>{{ grade }}</td>
        <td>{{ topic }}</td>
        <td>
            <div id="videoUrl">
                <div class="startTutoring"><button>Start leksehjelp</button></div>
            </div>
        </td>
        <td>{{ state }}</td>
        <td><div class="deleteSession"><button>Slett sesjon</button></div>
    </tr>
</template>
